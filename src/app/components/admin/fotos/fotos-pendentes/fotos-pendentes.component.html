<div class="fotos-pendentes-container">
    <header class="page-header">
        <div>
            <h1>Fotos Pendentes</h1>
            <p class="subtitle">Gerencie fotos aguardando publica√ß√£o</p>
        </div>
        <a routerLink="/adm/fotos/upload" class="btn btn-secondary">
            <span class="icon">üì§</span> Upload Fotos
        </a>
    </header>

    @if (erro) {
    <div class="alert alert-danger">
        {{ erro }}
    </div>
    }

    @if (sucesso) {
    <div class="alert alert-success">
        {{ sucesso }}
    </div>
    }

    @if (carregando) {
    <div class="loading">
        <div class="spinner"></div>
        <p>Carregando fotos pendentes...</p>
    </div>
    }

    @if (!carregando && fotosPendentes.length === 0) {
    <div class="empty-state">
        <div class="empty-icon">üì∏</div>
        <h2>Nenhuma foto pendente</h2>
        <p>Todas as fotos foram publicadas ou n√£o h√° fotos aguardando.</p>
        <a routerLink="/adm/fotos/upload" class="btn btn-primary">Fazer Upload</a>
    </div>
    }

    @if (!carregando && fotosPendentes.length > 0) {
    <div>
        <!-- A√ß√µes em massa -->
        <div class="bulk-actions">
            <div class="bulk-actions-left">
                <label class="checkbox-label">
                    <input type="checkbox" [checked]="todasSelecionadas" (change)="selecionarTodas()"
                        title="Selecionar todas as fotos" aria-label="Selecionar todas as fotos">
                    <span>Selecionar todas ({{ fotosSelecionadas.size }} de {{ fotosPendentes.length }})</span>
                </label>
            </div>

            <button class="btn btn-primary btn-publish" [disabled]="!algumaSelecionada || enviandoEmail"
                (click)="dispararNotificacoes()">
                @if (!enviandoEmail) {
                <span>üìß Disparar Notifica√ß√µes ({{ fotosSelecionadas.size }})</span>
                }
                @if (enviandoEmail) {
                <span>Enviando...</span>
                }
            </button>
        </div>

        <!-- Grid de fotos -->
        <div class="fotos-grid">
            @for (foto of fotosPendentes; track foto.id) {
            <div class="foto-card" [class.selected]="fotosSelecionadas.has(foto.id!)">
                <label class="foto-checkbox">
                    <input type="checkbox" [id]="'foto-' + foto.id" [checked]="fotosSelecionadas.has(foto.id!)"
                        (change)="toggleSelecionarFoto(foto.id!)"
                        [title]="'Selecionar foto' + (foto.descricao ? ': ' + foto.descricao : '')"
                        [attr.aria-label]="'Selecionar foto' + (foto.descricao ? ': ' + foto.descricao : '')">
                </label>

                <div class="foto-image">
                    <img [src]="getFotoUrl(foto)" [alt]="foto.descricao || 'Foto'">
                </div>

                <div class="foto-info">
                    @if (foto.descricao) {
                    <p class="foto-descricao">
                        <strong>Descri√ß√£o:</strong> {{ foto.descricao }}
                    </p>
                    }
                    @if (!foto.descricao) {
                    <p class="foto-descricao">
                        <em>Sem descri√ß√£o</em>
                    </p>
                    }

                    <p class="foto-animais">
                        <strong>Animais:</strong> {{ getNomesAnimais(foto) }}
                    </p>

                    <p class="foto-data">
                        <strong>Enviada em:</strong> {{ foto.dataCadastro | date:'dd/MM/yyyy HH:mm' }}
                    </p>
                </div>

                <div class="foto-actions">
                    <button class="btn btn-sm btn-danger" (click)="deletarFoto(foto.id!)" title="Deletar foto">
                        üóëÔ∏è Deletar
                    </button>
                </div>
            </div>
            }
        </div>
    </div>
    }
</div>