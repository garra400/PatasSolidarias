<div class="aceitar-convite-container">
    <!-- Loading -->
    @if (carregando) {
    <div class="card">
        <div class="loading">
            <div class="spinner">â³</div>
            <p>Verificando convite...</p>
        </div>
    </div>
    }

    <!-- Convite VÃ¡lido -->
    @if (!carregando && convite && !erro) {
    <div class="card">
        @if (!sucesso) {
        <div class="icon-header">âœ‰ï¸</div>
        <h1>Convite de Administrador</h1>
        <p class="descricao">VocÃª foi convidado para se tornar um administrador do sistema</p>

        <div class="convite-info">
            <div class="info-item">
                <span class="label">ğŸ“§ Email</span>
                <span class="value">{{ convite.emailConvidado || convite.usuarioEmail }}</span>
            </div>

            <div class="info-item">
                <span class="label">ğŸ‘¤ Convidado por</span>
                <span class="value">{{ convite.convidadoPorNome || convite.convidadoPor || 'Administrador' }}</span>
            </div>

            @if (convite.dataExpiracao) {
            <div class="info-item">
                <span class="label">â° Expira em</span>
                <span class="value">{{ formatarData(convite.dataExpiracao) }}</span>
            </div>
            }

            @if (convite.permissoes) {
            <div class="info-item">
                <span class="label">ğŸ”‘ PermissÃµes concedidas</span>
                <span class="value">{{ contarPermissoes(convite.permissoes) }} permissÃµes</span>
            </div>
            }
        </div>

        <!-- PermissÃµes Detalhadas -->
        @if (convite.permissoes) {
        <div class="permissoes-detalhes">
            <h3>ğŸ”‘ Suas PermissÃµes</h3>
            <div class="permissoes-lista">
                @if (convite.permissoes.gerenciarAnimais) {
                <div class="permissao-badge">ğŸ¾ Gerenciar Animais</div>
                }
                @if (convite.permissoes.gerenciarFotos) {
                <div class="permissao-badge">ğŸ“¸ Gerenciar Fotos</div>
                }
                @if (convite.permissoes.gerenciarBrindes) {
                <div class="permissao-badge">ğŸ Gerenciar Brindes</div>
                }
                @if (convite.permissoes.gerenciarPosts) {
                <div class="permissao-badge">ğŸ“ Gerenciar Posts</div>
                }
                @if (convite.permissoes.visualizarAssinantes) {
                <div class="permissao-badge">ğŸ‘¥ Visualizar Assinantes</div>
                }
                @if (convite.permissoes.convidarAdmins) {
                <div class="permissao-badge">âœ‰ï¸ Convidar Admins</div>
                }
                @if (convite.permissoes.gerenciarConfiguracoes) {
                <div class="permissao-badge">âš™ï¸ Gerenciar ConfiguraÃ§Ãµes</div>
                }
            </div>
        </div>
        }

        <div class="acoes">
            <button class="btn-aceitar" (click)="aceitar()" [disabled]="processando">
                @if (processando) {
                <span class="spinner-sm"></span> Processando...
                } @else {
                âœ… Aceitar Convite
                }
            </button>
            <button class="btn-recusar" (click)="recusar()" [disabled]="processando">
                âŒ Recusar
            </button>
        </div>
        } @else {
        <!-- Sucesso -->
        <div class="sucesso-state">
            <div class="icon-success">ğŸ‰</div>
            <h1>Convite Aceito!</h1>
            <p>VocÃª agora Ã© um administrador do sistema</p>
            <p class="redirect-msg">Redirecionando para o painel administrativo...</p>
            <div class="spinner"></div>
        </div>
        }
    </div>
    }

    <!-- Erro -->
    @if (!carregando && erro) {
    <div class="card">
        <div class="erro-state">
            <div class="icon-erro">âŒ</div>
            <h1>Convite InvÃ¡lido</h1>
            <p>{{ erro }}</p>
            <a [routerLink]="['/']" class="btn-voltar">ğŸ  Voltar para Home</a>
        </div>
    </div>
    }
</div>