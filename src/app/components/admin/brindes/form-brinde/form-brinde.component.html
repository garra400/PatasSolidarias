<div class="form-brinde-container">
    <header class="page-header">
        <div>
            <h1>{{ isEdicao ? 'Editar Brinde' : 'Novo Brinde' }}</h1>
            <p class="subtitle">{{ isEdicao ? 'Atualize as informa√ß√µes do brinde' : 'Cadastre um novo brinde para
                resgate' }}</p>
        </div>
    </header>

    <div *ngIf="erro" class="alert alert-danger">{{ erro }}</div>
    <div *ngIf="sucesso" class="alert alert-success">{{ sucesso }}</div>

    <form [formGroup]="form" (ngSubmit)="salvar()" class="brinde-form">
        <div class="form-grid">
            <!-- Foto -->
            <div class="form-group form-group-full">
                <label class="form-label">Foto do Brinde *</label>
                <div class="foto-upload">
                    <div class="foto-preview" *ngIf="preview" (click)="fileInput.click()">
                        <img [src]="preview" alt="Preview">
                        <div class="foto-overlay">
                            <span class="icon-change">üì∑ Trocar Foto</span>
                        </div>
                    </div>
                    <div class="foto-placeholder" *ngIf="!preview" (click)="fileInput.click()">
                        <span class="icon">üéÅ</span>
                        <p>Clique para selecionar uma foto</p>
                    </div>
                    <input #fileInput type="file" id="foto" accept="image/*" (change)="onFile($event)"
                        class="file-input" aria-label="Selecionar foto do brinde">
                    <button type="button" (click)="fileInput.click()" class="btn btn-secondary">
                        üì§ {{ preview ? 'Trocar' : 'Escolher' }} Foto
                    </button>
                    <p class="hint">Imagem do brinde que ser√° exibida na home e no resgate</p>
                </div>
            </div>

            <!-- Nome -->
            <div class="form-group">
                <label for="nome" class="form-label">Nome do Brinde *</label>
                <input type="text" id="nome" formControlName="nome" class="form-control"
                    placeholder="Ex: Adesivo Patinhas">
                <div *ngIf="form.get('nome')?.invalid && form.get('nome')?.touched" class="error-message">
                    Nome √© obrigat√≥rio
                </div>
            </div>

            <!-- Ordem -->
            <div class="form-group">
                <label for="ordem" class="form-label">Ordem de Exibi√ß√£o</label>
                <input type="number" id="ordem" formControlName="ordem" class="form-control" min="0" placeholder="0">
                <p class="hint-small">Ordem de exibi√ß√£o (menor n√∫mero aparece primeiro)</p>
            </div>

            <!-- Descri√ß√£o -->
            <div class="form-group form-group-full">
                <label for="descricao" class="form-label">Descri√ß√£o *</label>
                <textarea id="descricao" formControlName="descricao" class="form-control textarea" rows="4"
                    placeholder="Descreva o brinde..."></textarea>
                <div *ngIf="form.get('descricao')?.invalid && form.get('descricao')?.touched" class="error-message">
                    Descri√ß√£o √© obrigat√≥ria
                </div>
            </div>

            <!-- Quantidade Dispon√≠vel -->
            <div class="form-group">
                <label for="quantidadeDisponivel" class="form-label">Quantidade em Estoque</label>
                <input type="number" id="quantidadeDisponivel" formControlName="quantidadeDisponivel"
                    class="form-control" min="0" placeholder="Opcional">
                <p class="hint-small">Quantidade dispon√≠vel para resgate (opcional)</p>
            </div>

            <!-- Status Ativo -->
            <div class="form-group">
                <label class="form-label">Status</label>
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="ativo" formControlName="ativo" class="checkbox-input">
                    <label for="ativo" class="checkbox-label">
                        Brinde ativo no sistema
                    </label>
                </div>
            </div>

            <!-- Dispon√≠vel para Resgate -->
            <div class="form-group form-group-full">
                <div class="info-box">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="info-content">
                        <strong>Sobre disponibilidade:</strong>
                        <p>Use o bot√£o "Selecionar para Resgate" na lista de brindes para escolher at√© 4 brindes que
                            ser√£o exibidos na home para resgate dos apoiadores.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- A√ß√µes -->
        <div class="form-actions">
            <button type="button" (click)="cancelar()" class="btn btn-secondary" [disabled]="carregando">
                Cancelar
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="carregando || form.invalid">
                <span *ngIf="!carregando">{{ isEdicao ? 'Atualizar' : 'Criar' }} Brinde</span>
                <span *ngIf="carregando">Salvando...</span>
            </button>
        </div>
    </form>
</div>